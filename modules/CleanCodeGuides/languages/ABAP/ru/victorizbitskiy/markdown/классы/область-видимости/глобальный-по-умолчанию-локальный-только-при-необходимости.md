#### Глобальный по умолчанию, локальный только при необходимости

> [Чистый ABAP] > [Содержание] > [Классы] > [Область видимости] > [Эта секция]

Работайте с глобальными классами.
Используйте локальные классы только там, где это уместно.

> Глобальные классы — это те, которые видны в словаре данных.
> Локальные классы находятся внутри includ'а другого объекта 
> и видны только этому другому объекту.

Локальные классы подходят

- для очень специфических приватных структур данных, 
например, итератор для глобальных данных класса, 
который нужен только здесь;

- для извлечения сложного приватного алгоритма,
например, чтобы отделить состоящий из нескольких методов алгоритм сортировки-агрегирования, 
нацеленный на решение конкретной задачи, от остального кода в вашем классе;

- чтобы позволить замокать некоторые элементы глобального класса, 
например, путем выделения всего доступа к базе данных в отдельный локальный класс, 
который можно заменить фиктивным тестовым двойником в модульных тестах.

Локальные классы затрудняют повторное использование, потому что они не могут быть использованы где-либо еще.
Хотя их легко извлечь и сделать на их основе глобальный класс, люди обычно даже не могут их найти,
что в свою очередь приводит к нежелательному дублированию кода.
Ориентация, навигация и отладка в очень больших локальных классах
являются утомительными и раздражающими.

Поскольку ABAP выполняет блокировку на уровне includ'а, люди не смогут одновременно работать, например над
разными локальными классами, находящимися в одном includ'е 
\(что было бы возможно, если бы они были отдельными глобальными классами\).

Пересмотрите свое использование локальных классов, если

- ваш локальный include содержит десятки классов и тысячи строк кода;
- вы думаете о глобальных классах как о "пакетах", которые содержат другие классы;
- ваш глобальный класс вырождается в пустую оболочку;
- вы найдете дублирующийся код, повторяющийся в отдельных локальных includ'ах;
- ваши разработчики начинают блокировать друг друга и не могут работать параллельно;
- ваш список работ для выполения становится огромным, потому что ваши команды больше не понимают локальные includ'ы друг друга.