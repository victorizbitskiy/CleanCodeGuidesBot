### Предпочитайте REF TO вместо FIELD-SYMBOL

> [Чистый ABAP] > [Содержание] > [Переменные] > [Эта секция]

> Этой секции [бросили вызов](https://github.com/SAP/styleguides/issues/115).
> `FIELD-SYMBOL`ы вроде бы, значительно быстрее
> при переборе внутренних таблиц,
> так что рекомендация использовать `REF TO`
> для этих случаев может ухудшить производительность.

```ABAP
LOOP AT components REFERENCE INTO DATA(component).
```

вместо аналогичного

```ABAP
" anti-pattern
LOOP AT components ASSIGNING FIELD-SYMBOL(<component>).
```

за исключением случаев, когда вам нужны именно символы поля

```ABAP
ASSIGN generic->* TO FIELD-SYMBOL(<generic>).
ASSIGN COMPONENT name OF STRUCTURE structure TO FIELD-SYMBOL(<component>).
ASSIGN (class_name)=>(static_member) TO FIELD-SYMBOL(<member>).
```

Как показывают обзоры кода, люди склонны выбирать одно или другое произвольным образом, 
«просто так», «потому что мы всегда создаем такие циклы» или «без особой причины». 
Из-за такого произвольного выбора читатель тратит время на размышления, почему один из них используется чаще, чем другой. 
Поэтому необходимо заменить эти произвольные решения обоснованными и точными решениями. 
Наша рекомендация основана на следующем рассуждении:

- Символы полей могут выполнять некоторые действия, которые недоступны ссылкам, например динамический доступ к компонентам структуры.
В то же время ссылки могут делать то, чего не могут символы поля, например создавать структуру данных с динамическим типом.
В общем, довольствоваться одним невозможно.

- В объектно-ориентированном ABAP ссылки встречаются повсюду, и их невозможно избежать,
так как любой объект является `REF TO <class-name>`.
При этом, символы полей строго требуются только в немногих особых случаях, связанных с динамической типизацией.
Таким образом, ссылки формируют естественное предпочтение в любой объектно-ориентированной программе.

Символы полей короче ссылок, но результирующая экономия памяти настолько мала, что ее можно смело пренебречь. 
Скорость тоже не имеет значения. Таким образом, нет никаких причин, связанных с производительностью, предпочесть одно другому.

> Подробнее читайте в статье
> [_Accessing Data Objects Dynamically_ in the ABAP Programming Guidelines](https://help.sap.com/doc/abapdocu_751_index_htm/7.51/en-US/index.htm?file=abendyn_access_data_obj_guidl.htm).
